<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Detailed custom validation</title>
    <script language="JavaScript" src="custom.js"></script>
    <style>
      form {
        margin: 0 auto;
        width: 400px;
        padding: 1em;
        border: 1px solid #CCC;
        border-radius: 1em;
      }
      form div + div {
        margin-top: 2em;
      }
      label {
        display: inline-block;
        width: 90px;
        text-align: right;
      }
      body {
        font: 1em sans-serif;
        width: 200px;
        padding: 0;
        margin : 0 auto;
      }
      input, textarea {

  font: 1em sans-serif;


  width: 300px;
  box-sizing: border-box;


  border: 1px solid #999;
}
      p * {
        display: block;
      }



      /* This is our style for the invalid fields */
      input:invalid{
        border-color: #900;
        background-color: #FDD;
      }

      input:focus:invalid {
        outline: none;
      }

      /* This is the style of our error messages */
      .error {
        width  : 100%;
        padding: 0;

        font-size: 80%;
        color: white;
        background-color: #900;
        border-radius: 0 0 5px 5px;

        box-sizing: border-box;
      }

      .error.active {
        padding: 0.3em;
      }
    </style>
</head>

<body>
    <form action="" method="post">
        <div>
          <label for="name">Name:</label>
          <input type="text" id="name" required minlength="1">
          <span class="error" aria-live="polite"></span>
        </div>
        <div>
          <label for="mail">
          <span>E-mail:</span></label>
          <input type="email" id="mail" name="mail" required minlength="2">
          <span class="error" aria-live="polite"></span>
        </div>
        <div>
          <label for="password">Password:</label>
          <input type="text" id="password" required minlength="8" required maxlength="20">
          <span class="error" aria-live="polite"></span>
        </div>
        <div class="button">
          <button type="submit">Submit</button>
        </div>
    </form>

  <script>
    // There are many ways to pick a DOM node; here we get the form itself and the email
    // input box, as well as the span element into which we will place the error message.
    const form  = document.getElementsByTagName('form')[0];

    const email = document.getElementById('mail');
    const emailError = document.querySelector('#mail + span.error');
    const name = document.getElementById('name');
    const nameError = document.querySelector('#name + span.error');
    const password = document.getElementById('password');
    const passwordError = document.querySelector('#password + span.error');
    email.addEventListener('input', function (event) {
      // Each time the user types something, we check if the
      // form fields are valid.

      if (email.validity.valid) {
        // In case there is an error message visible, if the field
        // is valid, we remove the error message.
        emailError.innerHTML = ''; // Reset the content of the message
        emailError.className = 'error'; // Reset the visual state of the message
      } else {
        // If there is still an error, show the correct error
        showError();
      }
    });

    password.addEventListener('input', function (event) {
      // Each time the user types something, we check if the
      // form fields are valid.

      if (password.validity.valid) {
        // In case there is an error message visible, if the field
        // is valid, we remove the error message.
        passwordError.innerHTML = ''; // Reset the content of the message
        passwordError.className = 'error'; // Reset the visual state of the message
      } else {
        // If there is still an error, show the correct error
        showError();
      }
    });

    name.addEventListener('input', function (event) {
      // Each time the user types something, we check if the
      // form fields are valid.

      if (name.validity.valid) {
        // In case there is an error message visible, if the field
        // is valid, we remove the error message.
        nameError.innerHTML = ''; // Reset the content of the message
        nameError.className = 'error'; // Reset the visual state of the message
      } else {
        // If there is still an error, show the correct error
        showError();
      }
    });

    form.addEventListener('submit', function (event) {
      // if the form contains valid data, we let it submit

      if(!email.validity.valid) {
        // If it isn't, we display an appropriate error message
        showError();
        // Then we prevent the form from being sent by canceling the event
        event.preventDefault();
      }
    });

    form.addEventListener('submit', function (event) {
      // if the form contains valid data, we let it submit

      if(!password.validity.valid) {
        // If it isn't, we display an appropriate error message
        showError();
        // Then we prevent the form from being sent by canceling the event
        event.preventDefault();
      }
    });

    form.addEventListener('submit', function (event) {
      // if the form contains valid data, we let it submit

      if(!name.validity.valid) {
        // If it isn't, we display an appropriate error message
        showError();
        // Then we prevent the form from being sent by canceling the event
        event.preventDefault();
      }
    });
    function showError() {
      if(email.validity.valueMissing) {
        // If the field is empty
        // display the following error message.
        emailError.textContent = 'You need to enter an e-mail address.';
      } else if(email.validity.typeMismatch) {
        // If the field doesn't contain an email address
        // display the following error message.
        emailError.textContent = 'Entered value needs to be an e-mail address.';
      } else if(email.validity.tooShort) {
        // If the data is too short
        // display the following error message.
        emailError.textContent = `Email should be at least ${ email.minLength } characters; you entered ${ email.value.length }.`;
      }

      // Set the styling appropriately
      emailError.className = 'error active';
    }
    function showError() {
      if(password.validity.valueMissing) {
        // If the field is empty
        // display the following error message.
        passwordError.textContent = 'You need to enter an password.';
      } else if(password.validity.typeMismatch) {
        // If the field doesn't contain an email address
        // display the following error message.
        emailError.textContent = 'Entered value needs to be an password.';
      } else if(password.validity.tooShort) {
        // If the data is too short
        // display the following error message.
        passwordError.textContent = `Password should be at least ${ password.minLength="8" } at most ${ password.maxLength="20" } characters; you entered ${ password.value.length }.`;
      }

      // Set the styling appropriately
      passwordError.className = 'error active';
    }
    function showError() {
      if(name.validity.valueMissing) {
        // If the field is empty
        // display the following error message.
        nameError.textContent = 'You need to enter an Name.';
      } else if(name.validity.typeMismatch) {
        // If the field doesn't contain an email address
        // display the following error message.
        nameError.textContent = 'Entered value needs to be an Name.';
      } else if(name.validity.tooShort) {
        // If the data is too short
        // display the following error message.
        nameError.textContent = `Password should be at least ${ name.minLength="1" } characters; you entered ${ name.value.length }.`;
      }

      // Set the styling appropriately
      passwordError.className = 'error active';
    }
  </script>
</body>

</html>